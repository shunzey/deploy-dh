language: node_js
node_js:
  - 10.15.3

# use this to control what branches get built.
# http://docs.shippable.com/ci/advancedOptions/branches/
branches:
  only:
    - master
    - develop

env:
  global:
    - JEST_JUNIT_OUTPUT=$SHIPPABLE_REPO_DIR/shippable/testresults/testresults.xml
    - CODE_COVERAGE_DIR=$SHIPPABLE_REPO_DIR/shippable/codecoverage
    - MOD_LOC=$SHIPPABLE_REPO_DIR/node_modules/.bin/
    - REPO=shunzey/shippuble

build:
  ci:
    - shippable_retry npm install
    # Testresult must be in junit xml format and located into shippable/testresults folder.
    - npm test -- --coverage